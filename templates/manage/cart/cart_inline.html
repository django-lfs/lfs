{% load i18n %}
{% load lfs_tags %}

<form action="{% url lfs_set_cart_filters %}"
      method="post">

	<input type="hidden" name="came-from" value="cart" />
	<input type="hidden" name="cart-id" value="{{ cart.id }}" />

    <table class="filters">
		<tr>
			<td></td>
			<td class="discreet">{% trans "Start" %}</td>
			<td class="discreet">{% trans "End" %}</td>
		</tr>
		<tr>
			<td>
				<a href="{% url lfs_set_cart_filters_date %}?came-from=cart&amp;cart-id={{ cart.id }}&amp;start=0&amp;end=0"
				   class="ajax-link">T</a>
				<a href="{% url lfs_set_cart_filters_date %}?came-from=cart&amp;cart-id={{ cart.id }}&amp;start=1&amp;end=1"
				   class="ajax-link">Y</a>
				<a href="{% url lfs_set_cart_filters_date %}?came-from=cart&amp;cart-id={{ cart.id }}&amp;start=7&amp;end=0"
				   class="ajax-link">W</a>
			</td>
			<td>

				<input type="text"
				       name="start"
					   value="{{ start }}">
			</td>
			<td>

				<input type="text"
				       name="end"
					   value="{{ end }}">
			</td>
			<td>
				<input type="submit"
				       class="ajax-save-button-2" />

				<a href="{% url lfs_reset_cart_filters %}?came-from=cart;cart-id={{ cart.id }}"
				   class="ajax-link reset">&nbsp;</a>
			</td>
		</tr>
	</table>
</form>


<div class="site-actions">
    <a class="overview"
       href="{% url lfs_manage_carts %}">{% trans 'Overview' %}</a>
</div>

<table class="lfs-manage-table">
    <tr>
        <th colspan="2">
            {% trans 'General' %}
        </th>
    </tr>
    <tr>
        <td class="label"
            style="width:150px">
            {% trans 'ID' %}:
        </td>
        <td>
            {{ cart.id }}
        </td>
    </tr>
    <tr>
        <td class="label">
            {% trans 'Customer' %}:
        </td>
        <td>
            {% if user_name %}
                {{ user_name }} /
            {% endif %}
            {{ cart.session }}
        </td>
    </tr>        
    <tr>
        <td class="label">
            {% trans 'Creation date' %}:
        </td>
        <td>
            {{ cart.creation_date|date:_("DATETIME_FORMAT") }}
        </td>
    </tr>
    <tr>
        <td class="label">
            {% trans 'Items' %}:
        </td>
        <td>
            {{ cart.amount_of_items }}
        </td>
    </tr>
    <tr>
        <td class="label">
            {% trans 'Total' %}:
        </td>
        <td>
            {{ total|currency }}
        </td>
    </tr>
</table>

{% if cart.items %}
    <table class="lfs-manage-table">
        <tr>
            <th>
                {% trans 'ID' %}
            </th>
            <th>
                {% trans 'Creation date' %}
            </th>
            <th>
                {% trans 'Product' %}
            </th>
            <th>
                {% trans 'Price' %}
            </th>
        </tr>
        {% for item in cart.items %}
            <tr>
                <td>
                    <a href="{{ item.product.get_absolute_url}}">
                        {{ item.id }}
                    </a>
                </td>
                <td>
                    {{ item.creation_date|date:_("DATETIME_FORMAT") }}
                </td>
                <td>
                    <a href="{{ item.product.get_absolute_url}}">
                        {{ item.product.get_name }}
                    </a>
                </td>
                <td>
                    {{ item.product.get_price|currency }}
                </td>
            </tr>
        {% endfor %}
    </table>
{% else %}
    {% trans 'This cart has no items' %}
{% endif %}
